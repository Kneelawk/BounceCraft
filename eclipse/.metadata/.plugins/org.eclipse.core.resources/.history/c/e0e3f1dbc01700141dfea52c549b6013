package com.pommert.jedidiah.bouncecraft.fmp

import codechicken.multipart.TCuboidPart
import codechicken.lib.vec.Cuboid6
import codechicken.lib.vec.Rotation
import codechicken.lib.vec.Vector3
import net.minecraftforge.client.model.AdvancedModelLoader
import com.pommert.jedidiah.bouncecraft.ref.ModRef
import net.minecraft.util.ResourceLocation
import net.minecraftforge.client.model.obj.WavefrontObject
import net.minecraftforge.common.util.ForgeDirection
import net.minecraft.nbt.NBTTagCompound

class BCMultiPart(f: ForgeDirection) extends TCuboidPart {
	var facing: ForgeDirection = f

	def this() = this(null)

	@Override
	def getBounds = BCMultiPart.sides(facing.ordinal)

	@Override
	def getType = "bc_multipart"

	@Override
	override def load(tag: NBTTagCompound) {
		facing = ForgeDirection.VALID_DIRECTIONS(tag.getByte("facing"))
	}
	
	@Override
	override def save(tag: NBTTagCompound){
		tag.setByte("facing", facing.ordinal().asInstanceOf[Byte])
	}
}

object BCMultiPart {
	val sides = new Array[Cuboid6](6)
	sides(0) = new Cuboid6(0, 0, 0, 1, 1 / 16D, 1)
	for (i <- 1 to 6) {
		val t = Rotation.sideRotations(i).at(Vector3.center)
		sides(i) = sides(0).copy().apply(t)
	}

	val model = AdvancedModelLoader.loadModel(new ResourceLocation(ModRef.MOD_ID, "models/blockBounce.obj")).asInstanceOf[WavefrontObject]

	val texture = new ResourceLocation(ModRef.MOD_ID, "textures/blocks/blockBounce.png")
}